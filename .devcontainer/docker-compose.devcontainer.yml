# Dev Container 전용 서비스 (기존 db와 함께 실행)
services:
  devcontainer:
    build:
      context: ..
      dockerfile: .devcontainer/Dockerfile
    container_name: edwards-devcontainer
    volumes:
      - ..:/workspace:cached
      - devcontainer-vscode-extensions:/home/vscode/.vscode-server/extensions
      - devcontainer-node-modules:/workspace/frontend/node_modules
    command: sleep infinity
    environment:
      # PostgreSQL connection
      DATABASE_URL: "postgresql://postgres:password@db:5432/edwards"
      SECRET_KEY: "edwards-dev-secret-key"
      VITE_API_URL: "http://localhost:8000/api"
      # Development settings
      DEBUG: "true"
      RESET_DB: "false"
    depends_on:
      - db
    networks:
      - default

volumes:
  devcontainer-vscode-extensions:
  devcontainer-node-modules:
